<!-- formularios reactivos -->
<div class="container">
	<form [formGroup]="formularioRegistro" (ngSubmit)="onSubmit()" >

		<h3>{{"label.product maintenance" | translate}} - Formulario reactivo</h3>

		<!-- Codigo -->
		<!-- Se define la clase error para utilizarla en el css. 
		     como necesitamos saber si el codigo esta valid o invalid no lo podemos hacer directamente 
			 al nombre sino que en el ts debemos poder accesar mediante el metodo get del 
			 campo en este caso codigo, el class="form-control" los agrupa 
			 codigo.dirty || codigo.touched es si ya ingreso algo en el campo o si ya lo toco.
			 el ngClass es para que el input o sea donde se digita el código haga lo mismo pero en el css
			 La directiva ngClass le permite establecer dinámicamente clases de CSS en un elemento HTML 
			 mediante el enlace de datos de una expresión. En estos FORMULARIOS REACTIVOS
			 se debe colocar aqui en el html la clase form-control y el form-controlname y el nombre 
			 codigo debe ser = al nombre del ts -->

		<!-- Mirar si este campo va, no hay necesidad ya permite ADD y editar -->	 
		<!--<label>Id</label>
		<input class="form-control" type="text" formControlName="id" readonly>-->

		<label>Codigo</label>
		<input class="form-control" [ngClass]="{'input-error':codigo.invalid && (codigo.dirty || codigo.touched)}" 
			type="text" formControlName="codigo" placeholder="Código" required>	
		<div *ngIf="codigo.invalid && (codigo.dirty || codigo.touched)" class="error">
			<span *ngIf="codigo.errors.required">El código es obligatorio</span>
			<span *ngIf="codigo.errors.minlength">El tamaño mínimo son 2 caracteres</span>
			<span *ngIf="codigo.errors.maxlength">El tamaño máximo son 20 caracteres</span>							
		</div>

		<!-- Nombre -->
		<label>Nombre</label>
		<input class="form-control" [ngClass]="{'input-error':nombre.invalid && (nombre.dirty || nombre.touched)}"
		type="text" formControlName="nombre" placeholder="Nombre" required>
		<div *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)" class="error">
			<span *ngIf="nombre.errors.required">El nombre es obligatorio</span>
			<span *ngIf="nombre.errors.minlength">El nombre mínimo son 4 caracteres</span>
			<span *ngIf="nombre.errors.maxlength">El tamaño máximo son 20 caracteres</span>							
		</div>

		<!-- Costo -->
		<label>Costo</label>
		<input class="form-control" [ngClass]="{'input-error':costo.invalid && (costo.dirty || costo.touched)}" 
			type="text" formControlName="costo" placeholder="Costo" required>	
		<div *ngIf="costo.invalid && (costo.dirty || costo.touched)" class="error">
			<span *ngIf="costo.errors.required">El costo es obligatorio</span>
			<span *ngIf="costo.errors.min">El costo debe ser mínimo de 10</span>						
		</div>

		<!-- Existencia -->
		<label>Existencia</label>
		<input class="form-control" [ngClass]="{'input-error':existencia.invalid && (existencia.dirty || existencia.touched)}" 
			type="text" formControlName="existencia" placeholder="Existencia" required>	
		<div *ngIf="existencia.invalid && (existencia.dirty || existencia.touched)" class="error">
			<span *ngIf="existencia.errors.required">La existencia es obligatorio</span>
			<span *ngIf="existencia.errors.min">la existencia debe ser mínimo de 1</span>						
		</div>	
		
		<!-- iva -->
		<label>Iva</label>
		<input class="form-control" [ngClass]="{'input-error': iva.invalid && (iva?.dirty || iva?.touched)}"
		type="text" formControlName="iva" placeholder="iva" required>
		<div>
			
		</div>

		<!-- Precio -->
		<label>Precio</label>
		<input class="form-control" [ngClass]="{'input-error':precio.invalid && (precio.dirty || precio.touched)}" 
			type="text" formControlName="precio" placeholder="Precio" required>	
		<div *ngIf="precio.invalid && (precio.dirty || precio.touched)" class="error">
			<span *ngIf="precio.errors.required">El precio es obligatorio</span>
			<span *ngIf="precio.errors.min">El precio debe ser mínimo de 10</span>						
		</div>			

		<!-- Fecha ingreso -->
		<label>Fecha ingreso</label>
		<input class="form-control" [ngClass]="{'input-error':fechaIngreso.invalid && (fechaIngreso.dirty || fechaIngreso.touched)}"
		type="date" formControlName="fechaIngreso" placeholder="Fecha de ingreso">
		<div *ngIf="fechaIngreso.invalid && (fechaIngreso.dirty || fechaIngreso.touched)" class="error">
			<span *ngIf="fechaIngreso.errors.required">La fecha es obligatoria</span>
		</div>			

		<div class="text-center">
			<button [disabled]="!formularioRegistro.valid" class="btn btn-primary mr-1" >Guardar</button>
			<button class="btn btn-secondary" type="reset">Cancelar</button>
		</div>		

		<!-- Mirar si los dejamos con 2 botones -->
		<!-- Si no es valido el !producto.id haga create else o sea sino significa que es
			valido vaya al ste template que lo vamos a llamar elseBlock y por eso
			el template se llama #elseBlock -->
		<!--	<button class="btn btn-success" role="button" (click)="create()"
			*ngIf="!producto.id else elseBlock">Registrar</button>-->

		<!-- Para que se muestre el boton registrar o actualizar segun el usuario
			haya digitado -->
		<!--<ng-template #elseBlock>
			<button class="btn btn-success" role="button" (click)="update()">Actualizar</button>
		</ng-template>-->
 
	</form>
</div>